import type { NextPage } from "next";
import Head from "next/head";
import Image from "next/image";
import Link from "next/link";
import { useState, useEffect } from "react";
import { useDispatch } from "react-redux";
import styles from "../styles/Home.module.css";
import NavBar from "./components/NavBar";
import ListCard from "./components/CardList";
import Container from "@mui/material/Container";
import { Product } from "../interfaces/entity/product";

import { setErrorState, setLoadingState } from "../app/rootSlice";
import message from "../common/messages";
import {
  CardMedia,
  CardActions,
  Box,
  Card,
  CardHeader,
  Button,
  Grid,
  Item,
} from "@mui/material";
import numeral from "numeral";
import SellIcon from "@mui/icons-material/Sell";
import product from "./api/product";
function Home() {
  const dispatch = useDispatch();
  const [products, setProducts] = useState<Product[]>([]);
  // useEffect(() => {
  //   dispatch(
  //     setLoadingState({
  //       loading: true,
  //       loadingMessage: message.appAPILoading,
  //     })
  //   );
  //   fetch("/api/public/product")
  //     .then((response) => response.json())
  //     .then((data) => {
  //       if (data.error === true) {
  //         dispatch(
  //           setErrorState({
  //             message: data.message,
  //             values: "",
  //             severity: "error",
  //           })
  //         );
  //       } else {
  //         setProducts(data);
  //       }
  //     })
  //     .finally(() => {
  //       dispatch(
  //         setLoadingState({
  //           loading: false,
  //           loadingMessage: null,
  //         })
  //       );
  //     });
  // }, [dispatch]);
  return (
    <div className={styles.container}>
      <Head>
        <title>Mua bán account games</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      {/* <Container maxWidth={false}> */}
      <NavBar></NavBar>
      {/* </Container> */}
      <Container>
        <Box sx={{ flexGrow: 1, marginTop: 8 }}>
          <Card
            variant="outlined"
            style={{
              padding: 0,
              border: "none",
              boxShadow: "none",
              backgroundColor: "#1B3447",
            }}
          >
            <CardMedia
              component="img"
              height="auto"
              width="auto"
              image="/static/images/banner.jpg"
              alt=""
            />

            <CardHeader
              title="Mua bán tài khoản game uy tín"
              titleTypographyProps={{
                color: "red",
                fontSize: 28,
                textAlign: "center",
              }}
              subheaderTypographyProps={{ color: "#B6B6B6" }}
            />
            <CardActions
              disableSpacing
              style={{
                justifyContent: "center",
              }}
            >
              <Button
                variant="contained"
                style={{
                  // width: "100%",
                  color: "black",
                  backgroundColor: "#FFC107",
                  fontWeight: "bold",
                }}
                startIcon={<SellIcon />}
              >
                Mua ngay
              </Button>
            </CardActions>
          </Card>
        </Box>
      </Container>

      <Container style={{ marginTop: 4, marginBottom: 4 }}>
        <Grid container spacing={5}>
          <Grid item xs={12} sm={6} md={6} lg={6} xl={6}>
            <Card
              variant="outlined"
              style={{
                padding: 0,
                border: "none",
                boxShadow: "none",
                backgroundColor: "#1B3447",
              }}
            >
              <CardHeader
                title="Mua Acc game"
                titleTypographyProps={{
                  color: "red",
                  fontSize: 36,
                  textAlign: "center",
                }}
                subheader="với kho acc game cực kì hấp dẫn"
                subheaderTypographyProps={{
                  color: "red",
                  fontSize: 24,
                  textAlign: "center",
                  textTransform: "uppercase",
                }}
              />
              <CardMedia
                component="img"
                height="auto"
                width="auto"
                image="/static/images/banner.jpg"
                alt=""
              />

              <CardActions
                disableSpacing
                style={{
                  justifyContent: "center",
                }}
              >
                <Link href={"/account-game"}>
                  <Button
                    variant="contained"
                    style={{
                      width: "auto",
                      color: "black",
                      backgroundColor: "#FFC107",
                      fontWeight: "bold",
                    }}
                  >
                    MUA NGAY
                  </Button>
                </Link>
              </CardActions>
            </Card>
          </Grid>

          <Grid item xs={12} sm={6} md={6} lg={6} xl={6}>
            <Card
              variant="outlined"
              style={{
                padding: 0,
                border: "none",
                boxShadow: "none",
                backgroundColor: "#1B3447",
              }}
            >
              <CardHeader
                title="Nạp game"
                titleTypographyProps={{
                  color: "red",
                  fontSize: 36,
                  textAlign: "center",
                }}
                subheader="Chiết khấu cao - bảo hành trọn đời"
                subheaderTypographyProps={{
                  color: "red",
                  fontSize: 24,
                  textAlign: "center",
                  textTransform: "uppercase",
                }}
              />
              <CardMedia
                component="img"
                height="auto"
                width="auto"
                image="/static/images/banner.jpg"
                alt=""
              />

              <CardActions
                disableSpacing
                style={{
                  justifyContent: "center",
                }}
              >
                <Button
                  variant="contained"
                  style={{
                    width: "auto",
                    color: "black",
                    backgroundColor: "#FFC107",
                    fontWeight: "bold",
                  }}
                >
                  NẠP NGAY
                </Button>
              </CardActions>
            </Card>
          </Grid>
        </Grid>
      </Container>
      {/* <Container maxWidth={false} style={{ marginTop: 10 }}>
        <ListCard products={products}></ListCard>
      </Container> */}
      {/* <footer className={styles.footer}>
        <a
          href="https://vercel.com?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app"
          target="_blank"
          rel="noopener noreferrer"
        >
          Powered by{" "}
          <span className={styles.logo}>
            <Image src="/vercel.svg" alt="Vercel Logo" width={72} height={16} />
          </span>
        </a>
      </footer> */}
    </div>
  );
}

// export async function getServerSideProps() {
//   const uow = new UnitOfWork();
//   await uow.initialize();

//   const products = await uow.ProuductRepository.find({
//     relations: {
//       productItems: true,
//     },
//   });

//   return {
//     props: { products: products.map((p) => p.toJSON()) },
//   };
// }
export default Home;
